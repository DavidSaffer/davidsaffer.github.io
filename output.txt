Filename: index.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelBomber</title>
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="initial_page.css">
    <link rel="stylesheet" href="lobby.css">
    <link rel="stylesheet" href="game.css">
</head>
<body>
    <div id="initial_page">
        <header>
            <div class="logo">Pixel Bomber</div>
        </header>
        <main>
            <div class="nickname_box">
                <h1>Choose nickname</h1>
                <input type="text" id="nickname" placeholder="david">
                <button id="go_button">Go!</button>
            </div>
        </main>        
    </div>

    <div id="lobby" style="display:none">
        
        <div class="lobby-footer">
            <button id="create_lobby_button">Create Lobby</button>
            <button id="join_lobby_button">Join Lobby</button>
        </div>
        <div id="lobby_modal" class="modal">
            <div class="modal_content">
                <!-- <span class="close" id="close_create_room_modal">&times;</span> -->
                <h2 id="lobby_modal_title">Title</h2>
                <input type="text" id="lobby_modal_code" readonly value="YourLobbyCodeHere" style="text-align: center;">
                <button id="lobby_modal_coppy_button">Copy</button>
                <!-- <p id="lobby_modal_text"></p> -->
                <input type="text" id="lobby_modal_input" placeholder="Lobby Code">
                <button id="lobby_modal_button">Start Game</button>
            </div>
        </div>
    </div>

    <div id="game" style="display:none">

        <div id="game_modal" class="modal">
            <div class="game_modal_content">
                <div class="game_modal_header">
                    <span id="game_modal_lobby_code">Lobby Code: ABCD1234</span>
                    <button id="game_modal_leave_button" class="team-selection-leave-button">Leave</button>
                </div>
                <div class="game_modal_team_selection">
                    <div class="team_column">
                        <button class="game_modal_join_button red">Join Red Team</button>
                        <div class="player_list red_team"></div>
                    </div>
                    <div class="team_column">
                        <button class="game_modal_join_button yellow">Join Spectators</button>
                        <div class="player_list spectators"></div>
                    </div>
                    <div class="team_column">
                        <button class="game_modal_join_button blue">Join Blue Team</button>
                        <div class="player_list blue_team"></div>
                    </div>
                    
                </div>
            </div>
        </div>
        
        
              

        
        <!-- <p>Game!!</p>
        <button id="game_button">Send Message</button> -->
        <!-- <input type="text" id="game_input" placeholder="Message"> -->
        <div id="playerInfoContainer">
            <!-- <div class="player-info">
                <p>Test Player 1</p>
                <p>Score: 3000</p>
                <p>Lives: 5</p>
            </div>
            <div class="player-info">
                <p>Test Player 2</p>
                <p>Score: 4500</p>
                <p>Lives: 3</p>
            </div>
            <div class="player-info">
                <p>Test Player 2</p>
                <p>Score: 4500</p>
                <p>Lives: 3</p>
            </div>
            <div class="player-info">
                <p>Test Player 2</p>
                <p>Score: 4500</p>
                <p>Lives: 3</p>
            </div> -->
            
            <!-- Add more default player data as needed -->
        </div>
        
        <canvas id="game_canvas" width="80" height="80"></canvas>

    </div>
    
    <!-- <script src="/socket.io/socket.io.js"></script> -->
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="client.js"></script>
</body>
</html>---- End of index.html ----

Filename: client.js
const AppConfig = {
    canvasWidth: 16 * 100,
    canvasHeight: 9 * 100
    // Add more configuration settings as needed
};

document.addEventListener("DOMContentLoaded", () => {

    const canvas = document.getElementById('game_canvas');
    
    // Use values from the AppConfig object
    canvas.width = AppConfig.canvasWidth;
    canvas.height = AppConfig.canvasHeight;


    const peer = new Peer();
      
    let name = '';
    let peerId = null;


    peer.on('open', function(id) {
        console.log('My peer ID is: ' + id);
        peerId = id;
    });

    // peer.on('data', function(data) {
    //     console.log('Received', data);
    // });
    

    // Query DOM
    // initial page
    const initial_page = document.getElementById('initial_page');
    const name_input = document.getElementById('nickname');
    const go_button = document.getElementById('go_button');

    go_button.onclick = function() {
        name = name_input.value;
        go_to_lobby();
    }

    function go_to_lobby() {
        initial_page.style.display = "none";
        lobby.style.display = "flex";
    }

    // lobby page
    const lobby = document.getElementById('lobby');
    
    const create_lobby_button = document.getElementById('create_lobby_button');
    const join_lobby_button = document.getElementById('join_lobby_button');
    
    const lobby_modal = document.getElementById('lobby_modal');
    const lobby_modal_title = document.getElementById('lobby_modal_title');
    // const lobby_modal_text = document.getElementById('lobby_modal_text');
    const lobby_modal_input = document.getElementById('lobby_modal_input');
    const lobby_modal_button = document.getElementById('lobby_modal_button');

    const lobby_modal_coppy_button = document.getElementById('lobby_modal_coppy_button');
    const lobby_modal_code = document.getElementById('lobby_modal_code');

    function copyLobbyCode() {
        // Copy the text inside the text field
        navigator.clipboard.writeText(lobby_modal_code.value)
            .then(() => {
                // Optionally, show a message to indicate that the code was copied
                alert('Copied the lobby code: ' + lobby_modal_code.value);
            })
            .catch(err => {
                console.error('Could not copy text: ', err);
            });
    }

    // Set up the click event listener for the copy button
    lobby_modal_coppy_button.onclick = copyLobbyCode;

    
    create_lobby_button.onclick = function() {
        // Set the lobby code to the input's value
        lobby_modal_code.style.display = "block";
        lobby_modal_coppy_button.style.display = "block";
        lobby_modal_code.value = peerId; // Assuming peerId is your lobby code

        // Show the modal
        lobby_modal.style.display = "block";
        lobby_modal_title.innerText = "Lobby Code";

        // Automatically select the lobby code text for easy copying (optional)
        lobby_modal_code.select();
        lobby_modal_code.setSelectionRange(0, 99999); // For mobile devices

        lobby_modal_input.style.display = "none"; // Hide input

        lobby_modal.style.display = "block";
        lobby_modal_title.innerText = "Lobby Code";

        // lobby_modal_text.style.display = "block"; // Show text
        // lobby_modal_text.innerText = peerId;

        lobby_modal_button.onclick = function() {
            startGame();
        }
        

    }

    join_lobby_button.onclick = function() {
        // lobby_modal_text.style.display = "none"; // Hide text
        lobby_modal_code.style.display = "none"; // Hide text
        lobby_modal_coppy_button.style.display = "none"; // Hide button

        lobby_modal.style.display = "block";
        lobby_modal_title.innerText = "Enter Lobby Code";
        lobby_modal_input.style.display = "block"; // Show input
        lobby_modal_input.placeholder = 'Enter Lobby Code...';

        lobby_modal_button.onclick = joinGame;
        
        
    }

    const game_input = document.getElementById('game_input');
    

    function joinGame() {
        const lobby_code = lobby_modal_input.value;
        try {
 
            const conn = peer.connect(lobby_code);

            conn.on('open', () => {
                conn.send(`Hello! I am ${name}`);
            });
             // Listen for data from the connection
            conn.on('data', function(data) {
                console.log("Received data: ", data);
                if (data.type === 'game_input_change') {
                    game_input.value = data.message;
                }
            });

            // Send game input changes
            game_input.addEventListener('input', function() {
                conn.send({ type: 'game_input_change', message: game_input.value });
            });

        } 
        catch (error) {
            console.log(error);
        }
        showGame();
    }

    function startGame() {
        peer.on('connection', function(conn) {
            // Listen for data from the connection
            conn.on('data', function(data) {
                console.log("Received data: ", data);
                if (data.type === 'game_input_change') {
                    game_input.value = data.message;
                }
            });

            // Broadcast game input changes to all connected peers
            game_input.addEventListener('input', function() {
                conn.send({ type: 'game_input_change', message: game_input.value });
            });
        });
        showGame();
    }

    window.onclick = function(event) {
        if (event.target == lobby_modal) {
            lobby_modal.style.display = "none";
        }
    }

    const game = document.getElementById('game');

    function showGame() {
        lobby_modal.style.display = "none";
        lobby.style.display = "none";
        game.style.display = "grid";
    }
});
---- End of client.js ----

Filename: game.css
#game {
    display: grid; /* Use grid layout */
    grid-template-columns: 1fr auto 1fr; /* Three columns */
    grid-template-rows: 1fr auto 1fr; /* Three rows */
    height: 100vh;
    width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
    background-color: grey;
}

#game_canvas {
    grid-column: 2; /* Place canvas in the center column */
    grid-row: 2; /* Place canvas in the center row */
    /* justify-self: center;
    align-self: center; */
    border: 4px solid #000;
}

#playerInfoContainer {
    grid-column: 1; /* Place player info in the left column */
    grid-row: 2; /* Align with canvas row for vertical centering */
    display: flex;
    flex-direction: column;
    align-items: center; /* Center horizontally in the column */
    justify-content: center; /* Center vertically */
    gap: 10px;
    height: 100%; /* Take the full height of the grid area */
}

.player-info {
    padding: 10px;
    border: 1px solid #ccc;
    background-color: #f9f9f9;
}

/* Overall modal styling */
#game .modal {
    display: flex; /* Use flexbox for centering */
    position: fixed; /* Fix position to the viewport */
    z-index: 100; /* High z-index to ensure it's above other content */
    left: 0;
    top: 0;
    width: 100%; /* Span the full width of the viewport */
    height: 100%; /* Span the full height of the viewport */
    background-color: rgba(0, 0, 0, 0.4); /* Semi-transparent black background */
    align-items: center; /* Center content vertically */
    justify-content: center; /* Center content horizontally */
}

/* Modal content box styling */
.game_modal_content {
    background-color: #2c3e50; /* Dark blue background */
    border-radius: 8px; /* Rounded corners */
    width: 50%; /* Use half of the window width */
    max-width: 600px; /* Maximum width of modal */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
    padding: 20px; /* Padding inside the modal content box */
}

/* Modal header styling */
.game_modal_header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #4b6584; /* Border to separate the header from content */
    padding-bottom: 10px; /* Padding at the bottom of the header */
    margin-bottom: 20px; /* Margin below the header */
}

#game_modal_lobby_code {
    color: #f5f6fa; /* Light color for the lobby code */
    font-weight: bold;
}

.team-selection-leave-button {
    padding: 10px 20px;
    background-color: #e74c3c; /* Red color for leave button */
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
}

.team-selection-leave-button:hover {
    background-color: #c0392b; /* Darker red on hover */
}

/* Team columns container */
.game_modal_team_selection {
    display: flex;
    justify-content: space-evenly; /* Space the team columns evenly */
}

/* Individual team column styling */
.team_column {
    flex-grow: 1; /* Allow each column to grow */
    text-align: center; /* Center text within the column */
    margin: 0 10px; /* Margin between columns */
}

.team_column h3 {
    color: white; /* White text for team names */
    margin-bottom: 10px; /* Space below the team name */
}

/* Team selection button styling */
.game_modal_join_button {
    padding: 15px 30px;
    margin: 10px 0; /* Vertical margin for buttons */
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    width: 100%; /* Full width for block appearance */
    box-sizing: border-box; /* Include padding in width calculation */
    transition: background-color 0.3s; /* Smooth transition for hover */
}

/* Individual button colors */
.red_team {
    background-color: #e74c3c; /* Red team column background */
}

.blue_team {
    background-color: #3498db; /* Blue team column background */
}

.spectators {
    background-color: #f1c40f; /* Spectators column background */
}

.game_modal_join_button:hover {
    opacity: 0.8; /* Transparency effect on hover */
}


/* Style for team join buttons */
.game_modal_join_button {
    padding: 10px 20px;
    margin-bottom: 15px; /* Space between button and player list */
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    width: 100%; /* Full width for block appearance */
    box-sizing: border-box; /* Include padding in width calculation */
    transition: background-color 0.3s; /* Smooth transition for hover */
}

/* Color for each team's join button */
.game_modal_join_button.red { background-color: #e74c3c; }
.game_modal_join_button.blue { background-color: #3498db; }
.game_modal_join_button.yellow { background-color: #f1c40f; }

/* Hover effect for join buttons */
.game_modal_join_button:hover {
    opacity: 0.8;
}

/* Style for player list columns */
.player_list {
    border: 1px solid #ccc; /* Border for the player list */
    border-radius: 4px; /* Rounded corners */
    padding: 10px; /* Padding inside the player list */
    margin-top: 10px; /* Space above the player list */
    background-color: #fff; /* White background for visibility */
    height: 150px; /* Fixed height, or you can make it flexible */
    overflow-y: auto; /* Allow scrolling for overflow */
}---- End of game.css ----

Filename: initial_page.css
body, html {
    height: 100%;
    margin: 0;
    font-family: 'Arial', sans-serif;
    background: grey;
}

header {
    background: rgba(0, 0, 0, 0.5);
    color: white;
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

header .logo {
    font-size: 2em;
    font-weight: bold;
    background: -webkit-linear-gradient(left, #f1c40f, #e67e22);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.main {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
}

.nickname_box {
    background: rgba(0, 0, 0, 0.7);
    border-radius: 5px;
    padding: 20px;
    text-align: center;
}

.nickname_box h1 {
    color: #fff;
}

.nickname_box input {
    width: 200px;
    padding: 10px;
    margin-top: 10px;
    border: none;
    border-radius: 5px;
}

.nickname_box button {
    width: 60px;
    padding: 10px;
    margin-top: 10px;
    background-color: #e67e22;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.nickname_box button:hover {
    background-color: #f39c12;
}

---- End of initial_page.css ----

Filename: lobby.css
#lobby {
    display: none; /* This will be changed dynamically */
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background: #2c3e50; /* Dark blue background */
    color: white;
}

.lobby-footer {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}

.lobby-footer button {
    padding: 10px 20px;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-right: 10px; /* Add space between buttons */
}

.lobby-footer button:last-child {
    margin-right: 0; /* Remove margin from last button */
}

.lobby-footer button:hover {
    background-color: #2980b9;
}

/* Modal Styles */
#lobby .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0, 0, 0); /* Fallback color */
    background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
}

#lobby .modal_content {
    background-color: #fefefe;
    margin: 15% auto; /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 80%; /* Could be more or less, depending on screen size */
    max-width: 500px; /* Maximum width */
    border-radius: 5px;
    color: black; /* Text color for the modal */
}

#lobby .modal_content h2 {
    color: #333; /* Dark grey color for better contrast */
    margin-bottom: 20px; /* Spacing between title and content */
}

#lobby_modal_code {
    font-size: 1rem; /* Increase font size for better readability */
    border: 1px solid #ccc; /* Add border to the input */
    border-radius: 4px;
    padding: 10px;
    margin-bottom: 20px; /* Spacing between input and button */
    width: 70%; /* Width of input field */
    max-width: 400px; /* Maximum width of input field */
    display: inline-block; /* Make input inline for smaller screens */
}

#lobby button {
    background-color: #3498db; /* Primary button color */
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s;
    margin: 5px; /* Space around buttons */
}

#lobby button:hover {
    background-color: #2980b9; /* Darken button on hover */
}

/* Copy button specific styles */
#lobby_modal_coppy_button {
    background-color: #2ecc71; /* Green color for success actions like copying */
    font-weight: bold; /* Make the 'Copy' text bold */
}

#lobby_modal_coppy_button:hover {
    background-color: #27ae60; /* Darken the green on hover */
}

/* Start Game button specific styles */
#lobby_modal_button {
    background-color: #e67e22; /* Orange color to highlight primary action */
    font-weight: bold; /* Make the 'Start Game' text bold */
}

#lobby_modal_button:hover {
    background-color: #d35400; /* Darken the orange on hover */
}



#lobby_modal_input {
    font-size: 1rem; /* Increase font size for better readability */
    border: 1px solid #ccc; /* Add border to the input */
    border-radius: 4px;
    padding: 10px;
    margin-bottom: 20px; /* Spacing between input and button */
    width: 70%; /* Width of input field */
    max-width: 400px; /* Maximum width of input field */
    display: inline-block; /* Make input inline for smaller screens */
}
---- End of lobby.css ----

